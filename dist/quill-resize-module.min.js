!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).QuillResizeModule=e()}(this,function(){var i=function(t,e){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}))(t,e)};var t,a=function(){return(a=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},n=((l='#editor-resizer {\n  position: absolute;\n  border: 1px dashed #fff;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#editor-resizer .handler {\n  position: absolute;\n  right: -5px;\n  bottom: -5px;\n  width: 10px;\n  height: 10px;\n  border: 1px solid #333;\n  background-color: rgba(255, 255, 255, 0.8);\n  cursor: nwse-resize;\n  user-select: none;\n}\n#editor-resizer .toolbar {\n  position: absolute;\n  bottom: -3em;\n  left: 50%;\n  padding: 0.5em;\n  border: 1px solid #fff;\n  border-radius: 3px;\n  background-color: #fff;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n  transform: translateX(-50%);\n  width: 200px;\n}\n#editor-resizer .toolbar .group {\n  display: flex;\n  border: 1px solid #aaa;\n  border-radius: 6px;\n  white-space: nowrap;\n  text-align: center;\n  line-height: 2;\n  color: rgba(0, 0, 0, 0.65);\n}\n#editor-resizer .toolbar .group:not(:first-child) {\n  margin-top: 0.5em;\n}\n#editor-resizer .toolbar .group .btn {\n  flex: 1 0 0;\n  text-align: center;\n  width: 25%;\n  padding: 0 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: top;\n  user-select: none;\n  color: inherit;\n  cursor: pointer;\n}\n#editor-resizer .toolbar .group .btn:not(:last-child) {\n  border-right: 1px solid #bbb;\n}\n#editor-resizer .toolbar .group .btn:not(.btn-group):active {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n#editor-resizer .toolbar .group .btn img {\n  width: 16px;\n  height: 16px;\n  pointer-events: none;\n}\n#editor-resizer .toolbar .group .input-wrapper {\n  width: 25%;\n  border: 1px solid #eee;\n  position: relative;\n  border-right: 1px solid #bbb;\n  min-width: 4em;\n}\n#editor-resizer .toolbar .group .input-wrapper::after {\n  content: " ";\n  position: absolute;\n  height: 1px;\n  background-color: #333;\n  left: 0.5em;\n  right: 1em;\n  bottom: 0.2em;\n}\n#editor-resizer .toolbar .group .input-wrapper input {\n  color: inherit;\n  text-align: center;\n  width: 100%;\n  border: none;\n  outline: none;\n  padding: 0 0.5em;\n  padding-right: 1.5em;\n}\n#editor-resizer .toolbar .group .input-wrapper input:focus ~ .tooltip {\n  display: block;\n}\n#editor-resizer .toolbar .group .input-wrapper .suffix {\n  position: absolute;\n  right: 0.5em;\n}\n#editor-resizer .toolbar .group .input-wrapper .tooltip {\n  display: none;\n  position: absolute;\n  top: 100%;\n  left: 0;\n  font-size: small;\n  background-color: #fff;\n  box-shadow: 0 0 3px #a7a7a7;\n  padding: 0 0.6em;\n  border-radius: 5px;\n  zoom: 0.85;\n}\n')&&"undefined"!=typeof window&&((t=document.createElement("style")).setAttribute("media","screen"),t.innerHTML=l,document.head.appendChild(t)),e.prototype.findLabel=function(t){return this.config?Reflect.get(this.config,t):null},e);function e(t){this.config=a(a({},r),t)}var r={floatLeft:"left",floatRight:"right",center:"center",restore:"restore",altTip:"Press and hold alt to lock ratio!",inputTip:"Press enter key to apply change!"};var o,s,l;o=HTMLElement,i(s=u,l=o),s.prototype=null===l?Object.create(l):(d.prototype=l.prototype,new d);function d(){this.constructor=s}function u(){var t=null!==o&&o.apply(this,arguments)||this;return t.originSize=null,t}c.prototype.initResizer=function(){var t=this.container.querySelector("#editor-resizer");t||((t=document.createElement("div")).setAttribute("id","editor-resizer"),t.innerHTML=function(t){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];return t.replace(/\{(\d+)\}/g,function(t,e){return e<i.length?i[e]:""})}('\n<div class="handler" title="{0}"></div>\n<div class="toolbar">\n  <div class="group">\n    <span class="btn" data-type="align" data-styles="float:left" title="左对齐">\n        <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjI1NnB4IiBoZWlnaHQ9IjI1Ni4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2JmYmZiZiIgZD0iTTIwNC44IDIwNC44aDYxNC40djEwMi40SDIwNC44ek0yMDQuOCA0NjAuOGg0MDkuNnYxMDIuNEgyMDQuOHpNMjA0LjggNzE2LjhoMjU2djEwMi40SDIwNC44eiIgLz48L3N2Zz4=" alt="左对齐"/>\n    </span>\n    <span class="btn" data-type="align" title="中间对齐" data-styles="display:block;margin:auto;">\n        <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzIyMjk5ODE0NDk2IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI4ODMzIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiPjxwYXRoIGQ9Ik0xNjAgMTU5bTM2IDBsNjgyIDBxMzYgMCAzNiAzNmwwIDBxMCAzNi0zNiAzNmwtNjgyIDBxLTM2IDAtMzYtMzZsMCAwcTAtMzYgMzYtMzZaIiBmaWxsPSIjOGE4YThhIiBwLWlkPSIyODgzNCI+PC9wYXRoPjxwYXRoIGQ9Ik0zMjkgNDc2bTM2IDBsMzQ0IDBxMzYgMCAzNiAzNmwwIDBxMCAzNi0zNiAzNmwtMzQ0IDBxLTM2IDAtMzYtMzZsMCAwcTAtMzYgMzYtMzZaIiBmaWxsPSIjOGE4YThhIiBwLWlkPSIyODgzNSI+PC9wYXRoPjxwYXRoIGQ9Ik0yMzMgNzkzbTM2IDBsNTM2IDBxMzYgMCAzNiAzNmwwIDBxMCAzNi0zNiAzNmwtNTM2IDBxLTM2IDAtMzYtMzZsMCAwcTAtMzYgMzYtMzZaIiBmaWxsPSIjOGE4YThhIiBwLWlkPSIyODgzNiI+PC9wYXRoPjwvc3ZnPg==" alt="中间对齐"/>\n    </span>\n    <span class="btn" data-type="align" data-styles="float:right;" title="右对齐">\n        <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjI1NnB4IiBoZWlnaHQ9IjI1Ni4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2JmYmZiZiIgZD0iTTIwNC44IDIwNC44aDYxNC40djEwMi40SDIwNC44ek00MDkuNiA0NjAuOGg0MDkuNnYxMDIuNEg0MDkuNnpNNTYzLjIgNzE2LjhoMjU2djEwMi40aC0yNTZ6IiAvPjwvc3ZnPg==" alt="右对齐"/>\n    </span>\n    <span class="btn" data-type="align" data-styles="" title="还原">\n        <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyBjbGFzcz0iaWNvbiIgd2lkdGg9IjI1NnB4IiBoZWlnaHQ9IjI1Ni4wMHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2JmYmZiZiIgZD0iTTE5MiA2MzEuM2MtNi45IDAtMTMuOC0yLjktMTguOC04LjVsLTY3LjctNzYuN2MtOS4xLTEwLjQtOC4xLTI2LjIgMi4yLTM1LjMgMTAuNC05LjEgMjYuMi04LjEgMzUuMyAyLjJsNjcuNyA3Ni43YzkuMSAxMC40IDguMSAyNi4yLTIuMiAzNS4zLTQuNyA0LjMtMTAuNiA2LjMtMTYuNSA2LjN6IG03LjMgNS4zYy03IDAtMTQtMi45LTE4LjktOC43LTktMTAuNS03LjktMjYuMiAyLjYtMzUuM2w4MS43LTcwLjVjMTAuNS05IDI2LjItNy45IDM1LjMgMi42czcuOSAyNi4yLTIuNiAzNS4zbC04MS43IDcwLjVjLTQuOCA0LjEtMTAuNiA2LjEtMTYuNCA2LjF6IG0zMzMuMSAyNzMuMmMtMTYuNiAwLTMwLTEzLjQtMzAtMzBzMTMuNC0zMCAzMC0zMGMxNjQuOSAwIDI5OS4xLTEzNC4yIDI5OS4xLTI5OS4xUzY5Ny4zIDI1MS42IDUzMi40IDI1MS42Yy0xNjQuOSAwLTI5OS4xIDEzNC4yLTI5OS4xIDI5OS4xIDAgMTYuNi0xMy40IDMwLTMwIDMwcy0zMC0xMy40LTMwLTMwYzAtNDguNSA5LjUtOTUuNSAyOC4yLTEzOS44IDE4LjEtNDIuOCA0NC04MS4yIDc2LjktMTE0LjEgMzMtMzMgNzEuNC01OC45IDExNC4xLTc2LjkgNDQuMy0xOC43IDkxLjMtMjguMiAxMzkuOC0yOC4yczk1LjUgOS41IDEzOS44IDI4LjJjNDIuOCAxOC4xIDgxLjIgNDQgMTE0LjEgNzYuOSAzMyAzMyA1OC45IDcxLjQgNzYuOSAxMTQuMSAxOC43IDQ0LjMgMjguMiA5MS4zIDI4LjIgMTM5LjggMCA0OC41LTkuNSA5NS41LTI4LjIgMTM5LjgtMTguMSA0Mi44LTQ0IDgxLjItNzYuOSAxMTQuMS0zMyAzMy03MS40IDU4LjktMTE0LjEgNzYuOS00NC4yIDE4LjgtOTEuMiAyOC4zLTEzOS43IDI4LjN6IiAgLz48L3N2Zz4=" alt="还原"/>\n    </span>\n  </div>\n</div>\n',this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(t)),this.resizer=t},c.prototype.positionResizerToTarget=function(t){var e;null!==this.resizer&&(this.resizer.style.setProperty("left",t.offsetLeft+"px"),this.resizer.style.setProperty("top",t.offsetTop+"px"),this.resizer.style.setProperty("width",t.clientWidth+"px"),this.resizer.style.setProperty("height",t.clientHeight+"px"),(e=document.createElement("div")).setAttribute("id","size-content"),e.innerHTML='\n  <div style="position: absolute; font: 12px / 1 Arial, Helvetica, sans-serif; padding: 4px 8px; text-align: center; background-color: white; color: rgb(51, 51, 51); border: 1px solid rgb(119, 119, 119); box-sizing: border-box; opacity: 0.8; cursor: default; right: 4px; bottom: 4px; left: auto;">'+t.clientWidth+" * "+t.clientHeight+"</div>\n",document.querySelector("#size-content")&&null!=(t=document.querySelector("#size-content"))&&t.remove(),this.resizer.appendChild(e))},c.prototype.bindEvents=function(){null!==this.resizer&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing)},c.prototype._setStylesForToolbar=function(t,e){var i="_styles_"+t,t=("align"!==t||e||(this.resizeTarget.style.width="auto",this.resizeTarget.style.height="auto"),this.resizeTarget.style),n=this.resizeTarget[i];t.cssText=t.cssText.replaceAll(" ","").replace(n,"")+";"+e,this.resizeTarget[i]=e,this.positionResizerToTarget(this.resizeTarget),null!=(t=this.options)&&t.onChange(this.resizeTarget)},c.prototype.toolbarInputChange=function(t){var t=t.target,e=null==(e=null==t?void 0:t.dataset)?void 0:e.type,t=t.value;e&&Number(t)&&this._setStylesForToolbar(e,"width: "+Number(t)+"%;")},c.prototype.toolbarClick=function(t){var t=t.target,e=null==(e=null==t?void 0:t.dataset)?void 0:e.type;e&&t.classList.contains("btn")&&this._setStylesForToolbar(e,null==(e=null==t?void 0:t.dataset)?void 0:e.styles)},c.prototype.startResize=function(t){t.target.classList.contains("handler")&&1===t.which&&(this.startResizePosition={left:t.clientX,top:t.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},c.prototype.endResize=function(){var t;(this.startResizePosition=null)!=(t=this.options)&&t.onChange(this.resizeTarget)},c.prototype.resizing=function(t){var e,i,n,r;this.startResizePosition&&(n=t.clientX-this.startResizePosition.left,e=t.clientY-this.startResizePosition.top,i=this.startResizePosition.width,r=this.startResizePosition.height,i+=n,r+=e,t.altKey&&(r=(n=this.resizeTarget.originSize).height/n.width*i),this.resizeTarget.style.setProperty("width",Math.max(i,80)+"px"),this.resizeTarget.style.setProperty("height",Math.max(r,30)+"px"),this.positionResizerToTarget(this.resizeTarget))},c.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.resizer=null};var g=c;function c(t,e,i){this.resizer=null,this.startResizePosition=null,this.i18n=new n((null==i?void 0:i.locale)||r),this.options=i,(this.resizeTarget=t).originSize||(t.originSize={width:t.clientWidth,height:t.clientHeight}),this.container=e,this.initResizer(),this.positionResizerToTarget(t),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.bindEvents()}var h=function(t,e){this.element=t,this.cb=e,this.hasTracked=!1},z=(M.track=function(t,e){this.iframes.push(new h(t,e)),this.interval||(this.interval=setInterval(function(){M.checkClick()},this.resolution))},M.checkClick=function(){if(document.activeElement){var t,e=document.activeElement;for(t in this.iframes)e===this.iframes[t].element?0==this.iframes[t].hasTracked&&(this.iframes[t].cb.apply(window,[]),this.iframes[t].hasTracked=!0):this.iframes[t].hasTracked=!1}},M.resolution=200,M.iframes=[],M.interval=null,M);function M(){}return function(e,i){var n,r,o=e.root;function s(){var t=(new(e.getContents().constructor)).retain(1);e.updateContents(t)}o.addEventListener("click",function(t){var e=t.target;t.target&&["img","video"].includes(e.tagName.toLowerCase())&&(r=new g(n=e,o.parentElement,a(a({},i),{onChange:s})))}),e.on("text-change",function(t,e){o.querySelectorAll("iframe").forEach(function(t){z.track(t,function(){r=new g(n=t,o.parentElement,a(a({},i),{onChange:s}))})})}),document.addEventListener("mousedown",function(t){var e,i,t=t.target;t===n||null!=(i=null==(e=null==r?void 0:r.resizer)?void 0:e.contains)&&i.call(e,t)||(null!=(i=null==r?void 0:r.destory)&&i.call(r),n=r=null)},{capture:!0})}});
